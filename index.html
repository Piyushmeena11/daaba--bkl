<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeraBox Downloader Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            min-height: 100vh;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gradient-btn {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            transition: all 0.3s ease;
        }
        
        .gradient-btn:hover {
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(59, 130, 246, 0.3);
        }
        
        .gradient-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #fff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
            50% { box-shadow: 0 0 40px rgba(139, 92, 246, 0.5); }
        }
        
        .video-container {
            background: #000;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .video-container video {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }
    </style>
</head>
<body class="text-white">
    
    <!-- Background Effects -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"></div>
    </div>
    
    <div class="relative z-10 min-h-screen py-8 px-4">
        
        <!-- Header -->
        <header class="text-center mb-10">
            <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 mb-4 shadow-lg pulse-glow">
                <i class="fas fa-cloud-arrow-down text-3xl"></i>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold gradient-text mb-3">TeraBox Downloader Pro</h1>
            <p class="text-gray-400 text-lg max-w-xl mx-auto">Download & Stream TeraBox files with ease</p>
        </header>
        
        <!-- Main Container -->
        <main class="max-w-4xl mx-auto">
            
            <div class="glass-card rounded-2xl overflow-hidden">
                <div class="p-6 md:p-8">
                    
                    <!-- URL Input -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-300 mb-2">
                            <i class="fas fa-link mr-2 text-blue-400"></i>TeraBox Share URL
                        </label>
                        <input type="text" id="input-url" 
                            class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all"
                            placeholder="https://terabox.com/s/xxxxx or https://1024terabox.com/s/xxxxx"
                            value="https://1024terabox.com/s/1hCG9tKsSCJDOXg1Ai9lAKg">
                    </div>
                    
                    <!-- Cookies Input (Collapsible) -->
                    <div class="mb-6">
                        <button onclick="toggleCookies()" class="flex items-center gap-2 text-sm font-medium text-gray-300 mb-2 hover:text-white transition-colors">
                            <i class="fas fa-cookie text-purple-400"></i>
                            <span>Cookies (JSON Format)</span>
                            <i class="fas fa-chevron-down text-xs" id="cookie-toggle-icon"></i>
                        </button>
                        <div id="cookies-container" class="hidden">
                            <textarea id="input-cookies" rows="6"
                                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all font-mono text-xs leading-relaxed"
                                placeholder='{"cookies":[...]}'></textarea>
                            <p class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-info-circle mr-1"></i>
                                Cookies are pre-loaded. Update only if you have fresh cookies.
                            </p>
                        </div>
                    </div>
                    
                    <!-- Generate Button -->
                    <button onclick="generateLink()" id="btn-generate" class="w-full gradient-btn text-white font-bold py-4 px-6 rounded-xl flex items-center justify-center gap-3 text-lg">
                        <i class="fas fa-bolt"></i>
                        <span>Get Download Link</span>
                    </button>
                    
                    <!-- Status Message -->
                    <div id="status-message" class="hidden mt-4"></div>
                    
                    <!-- Result Section -->
                    <div id="result-section" class="hidden mt-6 space-y-6">
                        
                        <!-- File Info Card -->
                        <div class="bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/20 rounded-xl p-5">
                            <div class="flex items-center gap-2 mb-4">
                                <i class="fas fa-check-circle text-green-400 text-xl"></i>
                                <h3 class="text-lg font-bold text-green-300">File Ready!</h3>
                            </div>
                            
                            <div class="flex flex-col md:flex-row items-start gap-4">
                                <!-- Thumbnail -->
                                <div id="thumbnail-container" class="hidden w-32 h-24 rounded-lg overflow-hidden bg-black/30 flex-shrink-0">
                                    <img id="file-thumbnail" src="" alt="Thumbnail" class="w-full h-full object-cover">
                                </div>
                                
                                <!-- File Details -->
                                <div class="flex-1 min-w-0">
                                    <p class="font-bold text-lg text-white truncate" id="result-filename">filename.mp4</p>
                                    <div class="flex flex-wrap gap-3 mt-2 text-sm text-gray-400">
                                        <span id="result-size"><i class="fas fa-file mr-1"></i>0 MB</span>
                                        <span id="result-type"><i class="fas fa-tag mr-1"></i>Video</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Video Player (for video files) -->
                        <div id="video-player-section" class="hidden">
                            <h4 class="text-sm font-medium text-gray-300 mb-2">
                                <i class="fas fa-play-circle mr-2 text-purple-400"></i>Video Preview
                            </h4>
                            <div class="video-container">
                                <video id="video-player" controls playsinline>
                                    Your browser does not support HTML5 video.
                                </video>
                            </div>
                        </div>
                        
                        <!-- Download Links -->
                        <div class="space-y-4">
                            <h4 class="text-sm font-medium text-gray-300">
                                <i class="fas fa-download mr-2 text-blue-400"></i>Download Options
                            </h4>
                            
                            <!-- Primary Download Button -->
                            <div id="download-primary" class="hidden">
                                <a href="#" id="btn-download" target="_blank" rel="noopener" 
                                    class="block w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-4 px-6 rounded-xl text-center transition-all hover:scale-[1.02] shadow-lg">
                                    <i class="fas fa-download mr-2"></i>
                                    <span>Download File</span>
                                </a>
                            </div>
                            
                            <!-- Stream Link (for videos) -->
                            <div id="stream-primary" class="hidden">
                                <a href="#" id="btn-stream" target="_blank" rel="noopener"
                                    class="block w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold py-4 px-6 rounded-xl text-center transition-all hover:scale-[1.02] shadow-lg">
                                    <i class="fas fa-play mr-2"></i>
                                    <span>Stream Video</span>
                                </a>
                            </div>
                            
                            <!-- Direct Link -->
                            <div>
                                <label class="block text-xs font-medium text-gray-500 mb-1">Direct Link (Right-click → Copy)</label>
                                <div class="flex gap-2">
                                    <input type="text" id="result-link" readonly
                                        class="flex-1 px-4 py-3 bg-black/30 border border-white/10 rounded-xl text-gray-300 font-mono text-xs truncate">
                                    <button onclick="copyLink()" class="px-4 py-3 bg-white/10 hover:bg-white/20 rounded-xl transition-all flex-shrink-0" title="Copy Link">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Alternative Methods -->
                        <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                            <h4 class="text-sm font-semibold text-gray-300 mb-3">
                                <i class="fas fa-lightbulb mr-2 text-yellow-400"></i>If download doesn't start:
                            </h4>
                            <ol class="text-sm text-gray-400 space-y-2">
                                <li>1. Right-click the download button → "Open in new tab"</li>
                                <li>2. If prompted to login, use the TeraBox website with your cookies</li>
                                <li>3. For large files, use a download manager like IDM</li>
                            </ol>
                        </div>
                        
                    </div>
                    
                </div>
            </div>
            
            <!-- API Info -->
            <div class="glass-card rounded-2xl mt-6 p-6">
                <h3 class="text-lg font-bold mb-3 flex items-center gap-2">
                    <i class="fas fa-server text-blue-400"></i>
                    API Endpoint
                </h3>
                <div class="bg-black/30 rounded-lg p-4 font-mono text-sm">
                    <p class="text-gray-400 mb-2"># POST Request</p>
                    <p class="text-green-400">POST /api</p>
                    <p class="text-gray-400 mt-3 mb-2"># Request Body (JSON)</p>
                    <pre class="text-blue-300 text-xs overflow-x-auto">{
  "url": "https://terabox.com/s/xxxxx",
  "cookies": {"cookies": [...]}
}</pre>
                </div>
            </div>
            
        </main>
        
        <!-- Footer -->
        <footer class="text-center mt-10 text-gray-500 text-sm">
            <p>Built for educational purposes • TeraBox Downloader Pro</p>
        </footer>
        
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50"></div>

    <script>
        // ============================================
        // DEFAULT COOKIES
        // ============================================
        const DEFAULT_COOKIES = {
            "url": "https://www.terabox.com",
            "cookies": [
                {"domain":"www.terabox.com","hostOnly":true,"httpOnly":false,"name":"csrfToken","path":"/","sameSite":"unspecified","secure":false,"session":true,"storeId":"0","value":"gt8gMxIBAjXaGnqpKp7kTvmd"},
                {"domain":".terabox.com","expirationDate":1771069507.814615,"hostOnly":false,"httpOnly":false,"name":"browserid","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"6QhVuJprM2elRR2S44hdSHbQ0UTbFMdP3yQQ23fJkuFSoktSxxMIlbMgev0="},
                {"domain":".terabox.com","expirationDate":1768477538.120609,"hostOnly":false,"httpOnly":false,"name":"lang","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"en"},
                {"domain":".terabox.com","expirationDate":1800445544.448699,"hostOnly":false,"httpOnly":false,"name":"_ga","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"GA1.1.412164912.1765885513"},
                {"domain":".terabox.com","expirationDate":1797421529.069464,"hostOnly":false,"httpOnly":true,"name":"ndus","path":"/","sameSite":"unspecified","secure":true,"session":false,"storeId":"0","value":"YfF8bi3teHui2b2ZR2JFMDNRYtUmfedCtvQe0lve"},
                {"domain":".terabox.com","expirationDate":1773661536,"hostOnly":false,"httpOnly":false,"name":"_gcl_au","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"1.1.1672539397.1765885537"},
                {"domain":".terabox.com","expirationDate":1773661537,"hostOnly":false,"httpOnly":false,"name":"_rdt_uuid","path":"/","sameSite":"strict","secure":true,"session":false,"storeId":"0","value":"1765885537537.9cea5a38-8e1f-4e3e-9923-60396606e12b"},
                {"domain":".terabox.com","expirationDate":1773661538,"hostOnly":false,"httpOnly":false,"name":"_rdt_em","path":"/","sameSite":"strict","secure":true,"session":false,"storeId":"0","value":":1a68135193855528b41e250da15e38d7ab1ccb4188c7cf0ca8b54f16d9fd0736,2dfa6e90653bc791092a3aa4a05465bf12322098e77a772e814f77c95357460e"},
                {"domain":".terabox.com","expirationDate":1800445538.132261,"hostOnly":false,"httpOnly":false,"name":"_ga_HSVH9T016H","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"GS2.1.s1765885536$o1$g0$t1765885538$j58$l0$h0"},
                {"domain":"www.terabox.com","expirationDate":1781437539,"hostOnly":true,"httpOnly":false,"name":"g_state","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"{\"i_l\":0,\"i_ll\":1765885539619,\"i_b\":\"YG4tydtRv2iRqx/utXgIqEXT2UKLcNTAu9F9F7m23rg\",\"i_e\":{\"enable_itp_optimization\":0}}"},
                {"domain":"www.terabox.com","expirationDate":1768477541,"hostOnly":true,"httpOnly":false,"name":"ndut_fmt","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"B9BE3C2D316A95FEAD947AF03F7F90BE93453CC8B19A81736D7273AC937A587C"},
                {"domain":"www.terabox.com","expirationDate":1768477542.523677,"hostOnly":true,"httpOnly":false,"name":"ndut_fmv","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"259ec0b6993b5a5e98a78c0444581e5471ff93decf3f7566dbc1d0b0bfcdb65acccb85fcae680b420f8c5c29bdc9bc187434e5b0cb8e540b274667559decbdfe218eeadb9520518fb7add6714cf81fa294a59e55f58624fd4eb3dee42797fe7e6f432e49146edfa1ccb87cfe481027d9"},
                {"domain":".terabox.com","expirationDate":1765892745.020693,"hostOnly":false,"httpOnly":true,"name":"ab_sr","path":"/","sameSite":"no_restriction","secure":true,"session":false,"storeId":"0","value":"1.0.1_ODQwNDlkNzg3M2RkY2U5MjQyZGFhZTNiZjkwZjk5MjhmOWJjYzdlNzY3NDU5YTc0M2EyZGFhODlmMmM2NzBhMmRjMTM0ZmQwYzk3ZWE0OGI1MzFiOGYyMjdmMjlmZWYwNDhjNjhlMmIxZGVlMmE5YTI3MjFiNmRkZDkzMGZkYjQxZDUzYzg1NGFiZWE0ZWI2M2Y5ZjA0Y2M4NTcxYjgxZQ=="},
                {"domain":".terabox.com","hostOnly":false,"httpOnly":false,"name":"ab_ymg_result","path":"/","sameSite":"unspecified","secure":false,"session":true,"storeId":"0","value":"{\"data\":\"e03381a764728b08335cce57bf5b87b712da60cc09d95c96b96f40a5881513ba6f1b036dc0de9fb68713434419729b4e89508517a1b832f4ca94648767c98c61fad9a3fe4940fb553f0b0d4439c8f993672a1984b8ac190e8f0970f5c1d987d7688474c13b2a61f88445b73a55292232a9fb38456233b2340dce0671ff427ede\",\"key_id\":\"66\",\"sign\":\"27d27084\"}"},
                {"domain":".terabox.com","expirationDate":1800445574.598458,"hostOnly":false,"httpOnly":false,"name":"_ga_06ZNKL8C2E","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"GS2.1.s1765885512$o1$g1$t1765885574$j60$l0$h0"}
            ]
        };

        // ============================================
        // GLOBALS
        // ============================================
        let currentData = null;
        let hlsPlayer = null;

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('input-cookies').value = JSON.stringify(DEFAULT_COOKIES, null, 2);
        });

        // ============================================
        // TOGGLE COOKIES
        // ============================================
        function toggleCookies() {
            const container = document.getElementById('cookies-container');
            const icon = document.getElementById('cookie-toggle-icon');
            container.classList.toggle('hidden');
            icon.classList.toggle('fa-chevron-down');
            icon.classList.toggle('fa-chevron-up');
        }

        // ============================================
        // GENERATE LINK
        // ============================================
        async function generateLink() {
            const url = document.getElementById('input-url').value.trim();
            const cookies = document.getElementById('input-cookies').value.trim();
            const btn = document.getElementById('btn-generate');
            const statusDiv = document.getElementById('status-message');
            const resultSection = document.getElementById('result-section');
            
            if (!url) {
                showStatus('error', 'Please enter a TeraBox URL');
                return;
            }
            
            // Reset UI
            btn.disabled = true;
            btn.innerHTML = '<div class="loading-spinner"></div><span>Processing...</span>';
            resultSection.classList.add('hidden');
            statusDiv.classList.add('hidden');
            resetVideoPlayer();
            
            try {
                const response = await fetch('/api', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url, cookies })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentData = data.data;
                    showResult(data.data);
                    showStatus('success', 'File information retrieved successfully!');
                } else {
                    showStatus('error', data.error || 'Failed to get download link');
                }
            } catch (error) {
                console.error('Error:', error);
                showStatus('error', 'API connection failed. Make sure the backend is deployed to Vercel.');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-bolt"></i><span>Get Download Link</span>';
            }
        }

        // ============================================
        // SHOW RESULT
        // ============================================
        function showResult(data) {
            const resultSection = document.getElementById('result-section');
            
            // File info
            document.getElementById('result-filename').textContent = data.filename || 'Unknown File';
            document.getElementById('result-size').innerHTML = `<i class="fas fa-file mr-1"></i>${data.sizeFormatted || formatBytes(data.size)}`;
            
            // File type
            const typeLabels = {1: 'Video', 2: 'Audio', 3: 'Image', 4: 'Document', 5: 'Archive', 6: 'Other'};
            document.getElementById('result-type').innerHTML = `<i class="fas fa-tag mr-1"></i>${typeLabels[data.category] || 'File'}`;
            
            // Thumbnail
            if (data.thumbnail) {
                document.getElementById('file-thumbnail').src = data.thumbnail;
                document.getElementById('thumbnail-container').classList.remove('hidden');
            } else {
                document.getElementById('thumbnail-container').classList.add('hidden');
            }
            
            // Download link
            const downloadLink = data.downloadLink || '';
            document.getElementById('result-link').value = downloadLink;
            
            if (downloadLink && downloadLink !== 'N/A') {
                document.getElementById('btn-download').href = downloadLink;
                document.getElementById('download-primary').classList.remove('hidden');
            } else {
                document.getElementById('download-primary').classList.add('hidden');
            }
            
            // Stream link (for videos)
            if (data.isVideo && data.streamLink) {
                document.getElementById('btn-stream').href = data.streamLink;
                document.getElementById('stream-primary').classList.remove('hidden');
                
                // Setup video player
                setupVideoPlayer(data.streamLink, data.downloadLink);
            } else if (data.isVideo && data.downloadLink) {
                // Use download link for video
                document.getElementById('stream-primary').classList.add('hidden');
                setupVideoPlayer(null, data.downloadLink);
            } else {
                document.getElementById('stream-primary').classList.add('hidden');
                document.getElementById('video-player-section').classList.add('hidden');
            }
            
            resultSection.classList.remove('hidden');
        }

        // ============================================
        // VIDEO PLAYER
        // ============================================
        function setupVideoPlayer(streamUrl, downloadUrl) {
            const videoSection = document.getElementById('video-player-section');
            const video = document.getElementById('video-player');
            
            // Reset
            resetVideoPlayer();
            
            const playUrl = streamUrl || downloadUrl;
            
            if (!playUrl) {
                videoSection.classList.add('hidden');
                return;
            }
            
            videoSection.classList.remove('hidden');
            
            // Check if HLS stream
            if (playUrl.includes('.m3u8') || playUrl.includes('M3U8')) {
                if (Hls.isSupported()) {
                    hlsPlayer = new Hls();
                    hlsPlayer.loadSource(playUrl);
                    hlsPlayer.attachMedia(video);
                    hlsPlayer.on(Hls.Events.ERROR, function(event, data) {
                        console.error('HLS Error:', data);
                        // Fallback to download URL
                        if (downloadUrl && downloadUrl !== playUrl) {
                            video.src = downloadUrl;
                        }
                    });
                } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                    video.src = playUrl;
                }
            } else {
                // Direct video URL
                video.src = playUrl;
            }
            
            // Add poster if thumbnail available
            if (currentData && currentData.thumbnail) {
                video.poster = currentData.thumbnail;
            }
        }

        function resetVideoPlayer() {
            const video = document.getElementById('video-player');
            if (hlsPlayer) {
                hlsPlayer.destroy();
                hlsPlayer = null;
            }
            video.src = '';
            video.poster = '';
        }

        // ============================================
        // STATUS MESSAGES
        // ============================================
        function showStatus(type, message) {
            const statusDiv = document.getElementById('status-message');
            const styles = {
                error: 'bg-red-500/20 border-red-500/30 text-red-300',
                warning: 'bg-yellow-500/20 border-yellow-500/30 text-yellow-300',
                success: 'bg-green-500/20 border-green-500/30 text-green-300'
            };
            const icons = {
                error: 'fa-circle-xmark',
                warning: 'fa-triangle-exclamation',
                success: 'fa-circle-check'
            };
            
            statusDiv.className = `rounded-xl p-4 border ${styles[type]} flex items-start gap-3`;
            statusDiv.innerHTML = `
                <i class="fas ${icons[type]} mt-0.5"></i>
                <span>${message}</span>
            `;
            statusDiv.classList.remove('hidden');
            
            // Auto-hide success after 3s
            if (type === 'success') {
                setTimeout(() => {
                    statusDiv.classList.add('hidden');
                }, 3000);
            }
        }

        // ============================================
        // COPY LINK
        // ============================================
        function copyLink() {
            const link = document.getElementById('result-link').value;
            if (link && link !== 'N/A') {
                navigator.clipboard.writeText(link).then(() => {
                    showToast('Link copied to clipboard!');
                });
            } else {
                showToast('No link available to copy', 'error');
            }
        }

        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
            toast.className = `${bgColor} text-white px-6 py-3 rounded-xl shadow-lg mb-2 transform transition-all duration-300 translate-x-full`;
            toast.innerHTML = `<i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'} mr-2"></i>${message}`;
            container.appendChild(toast);
            
            // Animate in
            setTimeout(() => toast.classList.remove('translate-x-full'), 10);
            
            // Remove after 2s
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }

        // ============================================
        // UTILITIES
        // ============================================
        function formatBytes(bytes) {
            if (!bytes || bytes === 0) return '0 B';
            const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(1024));
            return (bytes / Math.pow(1024, i)).toFixed(2) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
